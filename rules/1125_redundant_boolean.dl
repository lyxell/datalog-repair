/**
 * Boolean literals should not be redundant
 *
 * https://rules.sonarsource.com/java/RSPEC-1125
 */

// TODO: Ternaries, Conditional or, Conditional and

#define MESSAGE "Remove this unnecessary boolean literal"

/* Rewrite x == y into x if y evaluates to false */
rewrite(1125, MESSAGE, eq_expr, other_expr_str) :-
    equals_expression(eq_expr, _, _),
    parent_of(eq_expr, _, true_expr),
    parent_of(eq_expr, _, other_expr),
    true_expr != other_expr,
    evaluates_to_boolean_value(true_expr, 1),
    string_representation(other_expr, other_expr_str).

/* Rewrite x == y into !x if y evaluates to true */
// TODO, add parens when necessary
rewrite(1125, MESSAGE,eq_expr, cat("!", other_expr_str)) :-
    equals_expression(eq_expr, _, _),
    parent_of(eq_expr, _, false_expr),
    parent_of(eq_expr, _, other_expr),
    false_expr != other_expr,
    evaluates_to_boolean_value(false_expr, 0),
    string_representation(other_expr, other_expr_str).
